# HONO Skill Guide

> Auto-generated by skill-build. Do not edit directly.

## Table of Contents

- [1. General](#general)
  - [1.1 Runtime Detection](#runtime-detection)
  - [1.2 RPC Client](#rpc-client)
  - [1.3 Context Object Pattern](#context-object-pattern)
  - [1.4 Error Handling](#error-handling)
  - [1.5 Body Parsing](#body-parsing)
  - [1.6 Middleware Pattern](#middleware-pattern)
  - [1.7 Type Safety and Generics](#type-safety-and-generics)
  - [1.8 Advanced Streaming Patterns](#advanced-streaming-patterns)
  - [1.9 JSX Engine](#jsx-engine)
  - [1.10 Streaming and SSE](#streaming-and-sse)
  - [1.11 tRPC Integration](#trpc-integration)
  - [1.12 Input Validation](#input-validation)
  - [1.13 Security Headers Middleware](#security-headers-middleware)
  - [1.14 Built-in Middleware](#built-in-middleware)
  - [1.15 v3 to v4 Migration](#v3-to-v4-migration)
  - [1.16 Cloudflare Workers Setup](#cloudflare-workers-setup)
  - [1.17 Bun and Node.js Setup](#bun-and-nodejs-setup)
  - [1.18 App Creation and Basic Routing](#app-creation-and-basic-routing)

---

## 1. General

### 1.1 Runtime Detection
**Impact**: LOW

## Runtime Detection
Use `getRuntimeKey` to detect which runtime the application is running on.
**When NOT to use this pattern:**
- If you are building a runtime-specific app (e.g., only Cloudflare Workers) and don't need cross-platform compatibility.
- When performance is critical and runtime checks add unnecessary overhead (though `getRuntimeKey` is very fast).
Reference: [Runtime Helper](https://hono.dev/docs/helpers/adapter#runtime)

---

### 1.2 RPC Client
**Impact**: HIGH

## RPC Client (hc)
Hono provides a built-in RPC client `hc` that shares types between server and client.
**Server:**
**Client:**
**When NOT to use this pattern:**
- When the client is written in a language other than TypeScript/JavaScript.
- When the API needs to be consumed by third-party developers without access to your source code types.
- For very simple APIs where the setup overhead outweighs the benefits.
Reference: [RPC](https://hono.dev/docs/guides/rpc)

---

### 1.3 Context Object Pattern
**Impact**: CRITICAL

## Context Object Pattern
Hono consolidates request and response into a single Context (`c`) object. This is NOT like Express.
**Incorrect (Express mental model):**
**Correct (Hono Context):**
**Setting headers and status:**
**Raw Request access (Web Standard):**
**When NOT to use this pattern:**
- When integrating with middleware or libraries that strictly require Express-style `req`/`res` objects (though adapters exist).
- In extremely performance-sensitive low-level code where object allocation matters (rare).
Reference: [Context](https://hono.dev/docs/api/context)

---

### 1.4 Error Handling
**Impact**: HIGH

## Error Handling
Hono uses `HTTPException` and `app.onError()` for error handling.
**Incorrect (Express error handling):**
**Correct (Hono error handling):**
**HTTPException with custom response:**
**Not Found handler:**
**Try-catch in handlers:**
**When NOT to use this pattern:**
- For recoverable errors where you want to return a specific success-like response (e.g., partial success).
- When using a library that manages its own error responses internally (though you can wrap it).
Reference: [Error Handling](https://hono.dev/docs/api/exception)

---

### 1.5 Body Parsing
**Impact**: HIGH

## Body Parsing
Hono provides distinct methods for parsing different body types.
**JSON:**
Use `c.req.json()` for JSON payloads.
**Form Data / Multipart:**
Use `c.req.parseBody()` for `application/x-www-form-urlencoded` or `multipart/form-data`.
**Raw ArrayBuffer:**
Use `c.req.arrayBuffer()` for raw binary data.
**When NOT to use this pattern:**
- When you need streaming access to the body (use `c.req.raw.body` directly).
- For very large file uploads where buffering the whole body is not feasible (use streaming).
Reference: [Body Parsing](https://hono.dev/docs/api/request#body)

---

### 1.6 Middleware Pattern
**Impact**: HIGH

## Middleware Pattern
Hono middleware uses async/await with `await next()`. This is NOT like Express's callback-based `next()`.
**Incorrect (Express middleware pattern):**
**Correct (Hono middleware pattern):**
**Timing middleware example:**
**Path-specific middleware:**
**Middleware must NOT return if it wants to continue:**
**When NOT to use this pattern:**
- When porting legacy Express middleware that heavily relies on synchronous execution or modifying the `req`/`res` objects directly (rewrite is preferred).
- For simple logic that can be handled within the route handler itself.
Reference: [Middleware](https://hono.dev/docs/guides/middleware)

---

### 1.7 Type Safety and Generics
**Impact**: HIGH

## Type Safety and Generics
Hono uses generics for full type safety. Define `Env` for bindings and variables.
**Typed environment:**
**Setting variables in middleware:**
**Typed client (RPC mode):**
**Validation with Zod:**
**When NOT to use this pattern:**
- For quick prototypes where type safety is not a priority.
- When working with dynamic data structures that are hard to type (though `unknown` or `any` can be used sparingly).
Reference: [RPC](https://hono.dev/docs/guides/rpc)

---

### 1.8 Advanced Streaming Patterns
**Impact**: MEDIUM

## Advanced Streaming Patterns
Beyond `streamSSE`, Hono supports raw `ReadableStream` for custom streaming.
**Manual ReadableStream:**
**Prefer Hono helpers when possible:**
**When to use raw ReadableStream:**
- Custom binary protocols
- Integrating with external streaming APIs
- Fine-grained control over encoding
**When NOT to use this pattern:**
- For standard text/JSON responses (use `c.text` or `c.json`).
- When simple streaming helpers like `stream` or `streamText` suffice.
- If the runtime doesn't fully support the Web Streams API (rare nowadays).
Reference: [MDN ReadableStream](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream)

---

### 1.9 JSX Engine
**Impact**: MEDIUM

## JSX Engine
Hono has a built-in JSX engine that is fast and lightweight. It runs on any runtime.
**Configuration (tsconfig.json):**
**Usage:**
**Streaming:**
**When NOT to use this pattern:**
- Building complex interactive SPAs (use React, Vue, Svelte, etc., on the client).
- When you need full React compatibility (use `react-dom/server` if necessary, though heavier).
- For simple string concatenation where JSX adds unnecessary build complexity.
Reference: [JSX](https://hono.dev/docs/guides/jsx)

---

### 1.10 Streaming and SSE
**Impact**: MEDIUM

## Streaming and SSE
Hono provides streaming helpers for real-time responses.
**Basic streaming:**
**Text streaming:**
**Server-Sent Events (SSE):**
**Client-side consumption:**
**Abort handling:**
**When NOT to use this pattern:**
- For small responses where buffering is faster and simpler.
- When the client doesn't support streaming (e.g., some older HTTP clients).
- If you need to modify the response headers *after* streaming has started (impossible).
Reference: [Streaming](https://hono.dev/docs/helpers/streaming)

---

### 1.11 tRPC Integration
**Impact**: HIGH

## tRPC Integration
Hono integrates with tRPC via `@hono/trpc-server` for type-safe APIs.
**Install:**
**Setup:**
**With context (auth, db):**
**Client usage:**
**When NOT to use this pattern:**
- If you need a RESTful API for public consumption (tRPC is RPC-based).
- When you want to minimize client-side bundle size (tRPC client adds some weight).
- If your team is not using TypeScript.
Reference: [@hono/trpc-server](https://github.com/honojs/middleware/tree/main/packages/trpc-server)

---

### 1.12 Input Validation
**Impact**: HIGH

## Input Validation
Use `validator` middleware to validate request data (json, form, query, param, header, cookie).
**With Zod:**
**Built-in Validator:**
**When NOT to use this pattern:**
- For extremely simple endpoints where manual checking is trivial and sufficient.
- When performance is the absolute top priority and validation library overhead is unacceptable (write custom raw validation).
Reference: [Validator](https://hono.dev/docs/guides/validation)

---

### 1.13 Security Headers Middleware
**Impact**: HIGH

## Security Headers Middleware
Add security headers using post-processing middleware pattern.
**Custom security headers middleware:**
**Prefer built-in secureHeaders:**
**secureHeaders options:**
**Post-processing pattern:**
Use `await next()` then modify `c.res.headers` in `finally` block to ensure headers are set even on errors.
**When NOT to use this pattern:**
- When you are behind a proxy/CDN that already handles security headers (though defense-in-depth is good).
- If a specific header breaks your application (configure it carefully instead of disabling).
Reference: [Secure Headers](https://hono.dev/docs/middleware/builtin/secure-headers)

---

### 1.14 Built-in Middleware
**Impact**: MEDIUM

## Built-in Middleware
Hono includes many built-in middleware. Import from `hono/<middleware-name>`.
**CORS:**
**Logger:**
**JWT:**
**Bearer Auth:**
**Basic Auth:**
**Secure Headers:**
**Available middleware:**
- `hono/cors` - CORS
- `hono/logger` - Request logging
- `hono/jwt` - JWT verification
- `hono/bearer-auth` - Bearer token auth
- `hono/basic-auth` - Basic auth
- `hono/secure-headers` - Security headers
- `hono/etag` - ETag generation
- `hono/compress` - Response compression
- `hono/cache` - Caching
- `hono/csrf` - CSRF protection
**When NOT to use this pattern:**
- When you need highly custom behavior not supported by the built-in middleware options.
- If the middleware adds significant overhead for a feature you don't need (e.g., full logger in production high-throughput endpoints).
Reference: [Built-in Middleware](https://hono.dev/docs/middleware/builtin)

---

### 1.15 v3 to v4 Migration
**Impact**: HIGH

## v3 to v4 Migration
Hono v4 removed several deprecated features.
**`c.jsonT()` removed:**
**Streaming moved to helper:**
**Next.js adapter renamed:**
**Lambda adapter type renamed:**
**Deno import path changed:**
**`app.showRoutes()` moved:**
**When NOT to use this pattern:**
- If you are still on Hono v3 (but you should upgrade!).
- When using community middleware that hasn't been updated for v4 yet.
Reference: [Migration Guide](https://github.com/honojs/hono/blob/main/docs/MIGRATION.md)

---

### 1.16 Cloudflare Workers Setup
**Impact**: CRITICAL

## Cloudflare Workers Setup
Hono is designed for Cloudflare Workers. Use `c.env` for bindings.
**Basic setup:**
**Accessing bindings:**
**wrangler.toml:**
**Incorrect (using process.env):**
**Incorrect (global env singleton):**
**Correct (using c.env):**
**Why c.env matters:**
- Request-scoped: each request gets correct bindings
- Testable: easy to mock in tests
- Future-proof: follows Cloudflare's execution model
**When NOT to use this pattern:**
- If you are running on Node.js or Bun (env access is different).
- When using a platform-agnostic way to access env vars (use `env(c)` helper, though `c.env` is preferred for types on Workers).
Reference: [Cloudflare Workers](https://hono.dev/docs/getting-started/cloudflare-workers)

---

### 1.17 Bun and Node.js Setup
**Impact**: HIGH

## Bun and Node.js Setup
Hono runs on Bun natively. For Node.js, use the node adapter.
**Bun setup:**
**Bun with explicit port:**
**Node.js setup:**
**Install for Node.js:**
**Accessing environment variables:**
**Deno setup:**
**When NOT to use this pattern:**
- If you are deploying to Cloudflare Workers (use the Workers adapter).
- When using Deno (use the Deno adapter).
Reference: [Bun](https://hono.dev/docs/getting-started/bun) | [Node.js](https://hono.dev/docs/getting-started/nodejs)

---

### 1.18 App Creation and Basic Routing
**Impact**: CRITICAL

## App Creation and Basic Routing
Hono uses a Context-based API, not Express's `req/res` pattern. You **must return** the response.
**Incorrect (Express pattern):**
**Correct (Hono pattern):**
**Path parameters:**
**Query parameters:**
**When NOT to use this pattern:**
- One-off scripts where Express is already set up.
- Legacy codebases with deep Express integration.
- If you need specific features only available in other frameworks (rare).
Reference: [Hono Routing](https://hono.dev/docs/api/routing)

---

